import{B as e,E as t,F as n,I as r,L as i,M as a,N as o,O as s,P as c,R as l,U as u,V as d,j as f,k as p,t as m}from"./index-DLR8I86A.js";var h=m(`chevron-down`,[[`path`,{d:`m6 9 6 6 6-6`,key:`qrunsl`}]]),g=m(`cloud-download`,[[`path`,{d:`M12 13v8l-4-4`,key:`1f5nwf`}],[`path`,{d:`m12 21 4-4`,key:`1lfcce`}],[`path`,{d:`M4.393 15.269A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.436 8.284`,key:`ui1hmy`}]]),_=u(d(),1),v=u(l(),1);function y(e){let t=e+`CollectionProvider`,[n,a]=i(t),[o,s]=n(t,{collectionRef:{current:null},itemMap:new Map}),c=e=>{let{scope:t,children:n}=e,r=_.useRef(null),i=_.useRef(new Map).current;return(0,v.jsx)(o,{scope:t,itemMap:i,collectionRef:r,children:n})};c.displayName=t;let l=e+`CollectionSlot`,u=f(l),d=_.forwardRef((e,t)=>{let{scope:n,children:i}=e,a=s(l,n),o=r(t,a.collectionRef);return(0,v.jsx)(u,{ref:o,children:i})});d.displayName=l;let p=e+`CollectionItemSlot`,m=`data-radix-collection-item`,h=f(p),g=_.forwardRef((e,t)=>{let{scope:n,children:i,...a}=e,o=_.useRef(null),c=r(t,o),l=s(p,n);return _.useEffect(()=>(l.itemMap.set(o,{ref:o,...a}),()=>void l.itemMap.delete(o))),(0,v.jsx)(h,{[m]:``,ref:c,children:i})});g.displayName=p;function y(t){let n=s(e+`CollectionConsumer`,t);return _.useCallback(()=>{let e=n.collectionRef.current;if(!e)return[];let t=Array.from(e.querySelectorAll(`[${m}]`));return Array.from(n.itemMap.values()).sort((e,n)=>t.indexOf(e.ref.current)-t.indexOf(n.ref.current))},[n.collectionRef,n.itemMap])}return[{Provider:c,Slot:d,ItemSlot:g},y,a]}var b=`Collapsible`,[x,S]=i(b),[ee,C]=x(b),w=_.forwardRef((e,t)=>{let{__scopeCollapsible:n,open:r,defaultOpen:i,disabled:s,onOpenChange:c,...l}=e,[u,d]=a({prop:r,defaultProp:i??!1,onChange:c,caller:b});return(0,v.jsx)(ee,{scope:n,disabled:s,contentId:o(),open:u,onOpenToggle:_.useCallback(()=>d(e=>!e),[d]),children:(0,v.jsx)(p.div,{"data-state":k(u),"data-disabled":s?``:void 0,...l,ref:t})})});w.displayName=b;var T=`CollapsibleTrigger`,E=_.forwardRef((e,t)=>{let{__scopeCollapsible:r,...i}=e,a=C(T,r);return(0,v.jsx)(p.button,{type:`button`,"aria-controls":a.contentId,"aria-expanded":a.open||!1,"data-state":k(a.open),"data-disabled":a.disabled?``:void 0,disabled:a.disabled,...i,ref:t,onClick:n(e.onClick,a.onOpenToggle)})});E.displayName=T;var D=`CollapsibleContent`,O=_.forwardRef((e,t)=>{let{forceMount:n,...r}=e,i=C(D,e.__scopeCollapsible);return(0,v.jsx)(s,{present:n||i.open,children:({present:e})=>(0,v.jsx)(te,{...r,ref:t,present:e})})});O.displayName=D;var te=_.forwardRef((e,t)=>{let{__scopeCollapsible:n,present:i,children:a,...o}=e,s=C(D,n),[l,u]=_.useState(i),d=_.useRef(null),f=r(t,d),m=_.useRef(0),h=m.current,g=_.useRef(0),y=g.current,b=s.open||l,x=_.useRef(b),S=_.useRef(void 0);return _.useEffect(()=>{let e=requestAnimationFrame(()=>x.current=!1);return()=>cancelAnimationFrame(e)},[]),c(()=>{let e=d.current;if(e){S.current=S.current||{transitionDuration:e.style.transitionDuration,animationName:e.style.animationName},e.style.transitionDuration=`0s`,e.style.animationName=`none`;let t=e.getBoundingClientRect();m.current=t.height,g.current=t.width,x.current||(e.style.transitionDuration=S.current.transitionDuration,e.style.animationName=S.current.animationName),u(i)}},[s.open,i]),(0,v.jsx)(p.div,{"data-state":k(s.open),"data-disabled":s.disabled?``:void 0,id:s.contentId,hidden:!b,...o,ref:f,style:{"--radix-collapsible-content-height":h?`${h}px`:void 0,"--radix-collapsible-content-width":y?`${y}px`:void 0,...e.style},children:b&&a})});function k(e){return e?`open`:`closed`}var ne=w,re=E,ie=O,ae=_.createContext(void 0);function oe(e){let t=_.useContext(ae);return e||t||`ltr`}var A=`Accordion`,se=[`Home`,`End`,`ArrowDown`,`ArrowUp`,`ArrowLeft`,`ArrowRight`],[j,M,ce]=y(A),[N,le]=i(A,[ce,S]),P=S(),F=_.forwardRef((e,t)=>{let{type:n,...r}=e,i=r,a=r;return(0,v.jsx)(j.Provider,{scope:e.__scopeAccordion,children:n===`multiple`?(0,v.jsx)(pe,{...a,ref:t}):(0,v.jsx)(fe,{...i,ref:t})})});F.displayName=A;var[I,ue]=N(A),[L,de]=N(A,{collapsible:!1}),fe=_.forwardRef((e,t)=>{let{value:n,defaultValue:r,onValueChange:i=()=>{},collapsible:o=!1,...s}=e,[c,l]=a({prop:n,defaultProp:r??``,onChange:i,caller:A});return(0,v.jsx)(I,{scope:e.__scopeAccordion,value:_.useMemo(()=>c?[c]:[],[c]),onItemOpen:l,onItemClose:_.useCallback(()=>o&&l(``),[o,l]),children:(0,v.jsx)(L,{scope:e.__scopeAccordion,collapsible:o,children:(0,v.jsx)(z,{...s,ref:t})})})}),pe=_.forwardRef((e,t)=>{let{value:n,defaultValue:r,onValueChange:i=()=>{},...o}=e,[s,c]=a({prop:n,defaultProp:r??[],onChange:i,caller:A}),l=_.useCallback(e=>c((t=[])=>[...t,e]),[c]),u=_.useCallback(e=>c((t=[])=>t.filter(t=>t!==e)),[c]);return(0,v.jsx)(I,{scope:e.__scopeAccordion,value:s,onItemOpen:l,onItemClose:u,children:(0,v.jsx)(L,{scope:e.__scopeAccordion,collapsible:!0,children:(0,v.jsx)(z,{...o,ref:t})})})}),[me,R]=N(A),z=_.forwardRef((e,t)=>{let{__scopeAccordion:i,disabled:a,dir:o,orientation:s=`vertical`,...c}=e,l=_.useRef(null),u=r(l,t),d=M(i),f=oe(o)===`ltr`,m=n(e.onKeyDown,e=>{if(!se.includes(e.key))return;let t=e.target,n=d().filter(e=>!e.ref.current?.disabled),r=n.findIndex(e=>e.ref.current===t),i=n.length;if(r===-1)return;e.preventDefault();let a=r,o=i-1,c=()=>{a=r+1,a>o&&(a=0)},l=()=>{a=r-1,a<0&&(a=o)};switch(e.key){case`Home`:a=0;break;case`End`:a=o;break;case`ArrowRight`:s===`horizontal`&&(f?c():l());break;case`ArrowDown`:s===`vertical`&&c();break;case`ArrowLeft`:s===`horizontal`&&(f?l():c());break;case`ArrowUp`:s===`vertical`&&l();break}let u=a%i;n[u].ref.current?.focus()});return(0,v.jsx)(me,{scope:i,disabled:a,direction:o,orientation:s,children:(0,v.jsx)(j.Slot,{scope:i,children:(0,v.jsx)(p.div,{...c,"data-orientation":s,ref:u,onKeyDown:a?void 0:m})})})}),B=`AccordionItem`,[he,V]=N(B),H=_.forwardRef((e,t)=>{let{__scopeAccordion:n,value:r,...i}=e,a=R(B,n),s=ue(B,n),c=P(n),l=o(),u=r&&s.value.includes(r)||!1,d=a.disabled||e.disabled;return(0,v.jsx)(he,{scope:n,open:u,disabled:d,triggerId:l,children:(0,v.jsx)(ne,{"data-orientation":a.orientation,"data-state":Y(u),...c,...i,ref:t,disabled:d,open:u,onOpenChange:e=>{e?s.onItemOpen(r):s.onItemClose(r)}})})});H.displayName=B;var U=`AccordionHeader`,W=_.forwardRef((e,t)=>{let{__scopeAccordion:n,...r}=e,i=R(A,n),a=V(U,n);return(0,v.jsx)(p.h3,{"data-orientation":i.orientation,"data-state":Y(a.open),"data-disabled":a.disabled?``:void 0,...r,ref:t})});W.displayName=U;var G=`AccordionTrigger`,K=_.forwardRef((e,t)=>{let{__scopeAccordion:n,...r}=e,i=R(A,n),a=V(G,n),o=de(G,n),s=P(n);return(0,v.jsx)(j.ItemSlot,{scope:n,children:(0,v.jsx)(re,{"aria-disabled":a.open&&!o.collapsible||void 0,"data-orientation":i.orientation,id:a.triggerId,...s,...r,ref:t})})});K.displayName=G;var q=`AccordionContent`,J=_.forwardRef((e,t)=>{let{__scopeAccordion:n,...r}=e,i=R(A,n),a=V(q,n),o=P(n);return(0,v.jsx)(ie,{role:`region`,"aria-labelledby":a.triggerId,"data-orientation":i.orientation,...o,...r,ref:t,style:{"--radix-accordion-content-height":`var(--radix-collapsible-content-height)`,"--radix-accordion-content-width":`var(--radix-collapsible-content-width)`,...e.style}})});J.displayName=q;function Y(e){return e?`open`:`closed`}var ge=F,_e=H,ve=W,ye=K,be=J,X=u(e());function xe(e){let t=(0,X.c)(4),n;t[0]===e?n=t[1]:({...n}=e,t[0]=e,t[1]=n);let r;return t[2]===n?r=t[3]:(r=(0,v.jsx)(ge,{"data-slot":`accordion`,...n}),t[2]=n,t[3]=r),r}function Se(e){let n=(0,X.c)(12),r,i,a;n[0]===e?(r=n[1],i=n[2],a=n[3]):({children:r,className:i,...a}=e,n[0]=e,n[1]=r,n[2]=i,n[3]=a);let o;n[4]===i?o=n[5]:(o=t(`pt-0 pb-4`,i),n[4]=i,n[5]=o);let s;n[6]!==r||n[7]!==o?(s=(0,v.jsx)(`div`,{className:o,children:r}),n[6]=r,n[7]=o,n[8]=s):s=n[8];let c;return n[9]!==a||n[10]!==s?(c=(0,v.jsx)(be,{className:`overflow-hidden text-sm data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down`,"data-slot":`accordion-content`,...a,children:s}),n[9]=a,n[10]=s,n[11]=c):c=n[11],c}function Ce(e){let n=(0,X.c)(8),r,i;n[0]===e?(r=n[1],i=n[2]):({className:r,...i}=e,n[0]=e,n[1]=r,n[2]=i);let a;n[3]===r?a=n[4]:(a=t(`border-b last:border-b-0`,r),n[3]=r,n[4]=a);let o;return n[5]!==i||n[6]!==a?(o=(0,v.jsx)(_e,{className:a,"data-slot":`accordion-item`,...i}),n[5]=i,n[6]=a,n[7]=o):o=n[7],o}function we(e){let n=(0,X.c)(13),r,i,a;n[0]===e?(r=n[1],i=n[2],a=n[3]):({children:r,className:i,...a}=e,n[0]=e,n[1]=r,n[2]=i,n[3]=a);let o;n[4]===i?o=n[5]:(o=t(`flex flex-1 items-start justify-between gap-4 rounded-md py-4 text-left text-sm font-medium transition-all outline-none hover:underline focus-visible:border-ring focus-visible:ring-[3px] focus-visible:ring-ring/50 disabled:pointer-events-none disabled:opacity-50 [&[data-state=open]>svg]:rotate-180`,i),n[4]=i,n[5]=o);let s;n[6]===Symbol.for(`react.memo_cache_sentinel`)?(s=(0,v.jsx)(h,{className:`pointer-events-none size-4 shrink-0 translate-y-0.5 text-muted-foreground transition-transform duration-200`}),n[6]=s):s=n[6];let c;n[7]===r?c=n[8]:(c=(0,v.jsxs)(_.Fragment,{children:[r,s]}),n[7]=r,n[8]=c);let l;return n[9]!==a||n[10]!==o||n[11]!==c?(l=(0,v.jsx)(ve,{className:`flex`,children:(0,v.jsx)(ye,{className:o,"data-slot":`accordion-trigger`,...a,children:c})}),n[9]=a,n[10]=o,n[11]=c,n[12]=l):l=n[12],l}var Te=u(e());function Ee(e){let n=(0,Te.c)(8),r,i;n[0]===e?(r=n[1],i=n[2]):({className:r,...i}=e,n[0]=e,n[1]=r,n[2]=i);let a;n[3]===r?a=n[4]:(a=t(`animate-pulse rounded-md bg-accent`,r),n[3]=r,n[4]=a);let o;return n[5]!==i||n[6]!==a?(o=(0,v.jsx)(`div`,{className:a,"data-slot":`skeleton`,...i}),n[5]=i,n[6]=a,n[7]=o):o=n[7],o}var De=`https://corsproxy.io/?url=`,Z=15e3;function Oe(e){let[t,n]=(0,_.useState)(null),[r,i]=(0,_.useState)(!1),[a,o]=(0,_.useState)(null),s=(0,_.useRef)(null),c=(0,_.useRef)(!0);(0,_.useEffect)(()=>(c.current=!0,()=>{c.current=!1,s.current?.abort()}),[]);let l=(0,_.useCallback)(async(e,t)=>{let n=new AbortController;s.current=n;let r=n.signal,i=setTimeout(()=>n.abort(),t?.timeoutMs??Z);try{let n=await fetch(De+encodeURIComponent(e),{body:t?.body,headers:{"Content-Type":`application/x-www-form-urlencoded`},method:t?.method??`GET`,signal:r});if(!n.ok)throw Error(`${n.status} ${n.statusText}`);return await n.text()}finally{clearTimeout(i)}},[]),u=(0,_.useCallback)(async e=>{if(e){i(!0),o(null);try{let t=await l(e,{method:`GET`});if(!t)throw Error(`Failed to fetch page HTML`);let r=Pe(t);if(!r)throw Error(`Could not extract JSON info from page`);let i=`action=getPostLinksAjax&id=${encodeURIComponent(r.id)}&posttype=${encodeURIComponent(r.type)}`,a=await l(`https://almasmovie.website/wp-admin/admin-ajax.php`,{body:i,method:`POST`});if(!a)throw Error(`Failed to fetch download HTML`);let o=r.type===`tvshow`?Ne(a):Me(a);c.current&&n({result:o,type:r.type})}catch(e){if(e.name===`AbortError`)return;c.current&&o(e.message||`Unknown error`)}finally{c.current&&i(!1)}}},[l]);(0,_.useEffect)(()=>{e&&(s.current?.abort(),u(e))},[e,u]);let d=(0,_.useCallback)(()=>{e&&(s.current?.abort(),u(e))},[e,u]);return{data:t,error:a,loading:r,refetch:d}}function ke(e){let t=e.toLowerCase();return t.includes(`5.1`)||t.includes(`aac5.1`)||t.includes(`5ch`)?{en:`5.1 Channels`,fa:`۵.۱ کانال`}:t.includes(`7.1`)||t.includes(`aac7.1`)||t.includes(`7ch`)?{en:`7.1 Channels`,fa:`۷.۱ کانال`}:t.includes(`6ch`)||t.includes(`aac6.0`)||t.includes(`6ch`)?{en:`6 Channels`,fa:`۶ کانال`}:t.includes(`2.0`)||t.includes(`aac2.0`)||t.includes(`2ch`)?{en:`2 Channels`,fa:`۲ کانال`}:t.includes(`stereo`)?{en:`Stereo`,fa:`استریو`}:t.includes(`aac`)?{en:`AAC Audio`,fa:`صدای AAC`}:t.includes(`dts`)?{en:`DTS Audio`,fa:`صدای DTS`}:t.includes(`truehd`)?{en:`Dolby TrueHD`,fa:`دالبی TrueHD`}:t.includes(`atmos`)?{en:`Dolby Atmos`,fa:`دالبی اتموس`}:{en:`Unknown`,fa:`نامشخص`}}function Ae(e){let t=[`ganool`,`pahe`,`tigole`,`yify`,`rarbg`,`ettv`,`shaanig`,`anoXmous`,`juggs`,`nimitmak`],n=e.toLowerCase();for(let e of t)if(n.includes(e))return e;return`نامشخص`}function je(e){let t=e.toLowerCase(),n=`Unknown`,r=`نامشخص`;t.includes(`2160p`)||t.includes(`4k`)?(n=`4K`,r=`۴کی`):t.includes(`1440p`)||t.includes(`2k`)?(n=`2K`,r=`۲کی`):t.includes(`1080p`)?(n=`1080p`,r=`۱۰۸۰p`):t.includes(`720p`)?(n=`720p`,r=`۷۲۰p`):t.includes(`480p`)?(n=`480p`,r=`۴۸۰p`):t.includes(`360p`)?(n=`360p`,r=`۳۶۰p`):t.includes(`240p`)&&(n=`240p`,r=`۲۴۰p`);let i=`Unknown`,a=`نامشخص`;t.includes(`bluray`)?(i=`BluRay`,a=`بلوری`):t.includes(`brrip`)?(i=`BRRip`,a=`بی‌ریپ`):t.includes(`webrip`)?(i=`WEBRip`,a=`وب‌ریپ`):t.includes(`web-dl`)||t.includes(`webdl`)?(i=`WEB-DL`,a=`وب-دی‌ال`):t.includes(`hdrip`)?(i=`HDRip`,a=`اچ‌دی‌ریپ`):t.includes(`dvdrip`)?(i=`DVDRip`,a=`دی‌وی‌دی‌ریپ`):t.includes(`cam`)&&(i=`CAM`,a=`کَم (دوربینی)`);let o=t.includes(`dubbed`)||t.includes(`dual audio`)||t.includes(`dual-audio`)||t.includes(`farsi`)||t.includes(`persian`);return{audio:ke(e),bit10:t.includes(`10bit`),dubbed:o,encoder:Ae(e),imax:t.includes(`imax`),quality:{en:n,fa:r},source:{en:i,fa:a},x265:t.includes(`x265`)||t.includes(`hevc`)}}function Q(e){let t=e.downloadLink||``;return{...e,info:je(t)}}function Me(e){let t=[];if(!e)return t;let n=[...new DOMParser().parseFromString(e,`text/html`).querySelectorAll(`h3`)].filter(e=>/(HD|4K|480|720|1080|کیفیت)/i.test(e.textContent||``));if(n.length>0)for(let e of n){let[n,r]=(e.textContent||``).trim().split(/\s\/\s/).map(e=>e.trim()),i=e.nextElementSibling,a=[];if(i){let e=[...i.querySelectorAll(`a`)].filter(e=>/(دانلود فیلم با این کیفیت|دانلود زیرنویس فارسی این کیفیت)/.test(e.textContent||``));for(let t of e)a.push(t.getAttribute(`href`)||``)}t.push(Q({downloadLink:a[0]||null,quality:n||`unknown`,size:r||null,subtitleLink:a[1]||null}))}else{let n=/<h3[^>]*>([\s\S]*?)<\/h3>[\s\S]*?<div[^>]*>([\s\S]*?)<\/div>/g,r=/<a[^>]*href="([^"]+)"[^>]*>(?:دانلود فیلم با این کیفیت|دانلود زیرنویس فارسی این کیفیت)<\/a>/g,i;for(;i=n.exec(e);){let[e,n]=i[1].replaceAll(/<[^>]+>/g,``).trim().split(/\s\/\s/).map(e=>e.trim()),a=i[2],o=[],s;for(r.lastIndex=0;s=r.exec(a);)o.push(s[1]);t.push(Q({downloadLink:o[0]||null,quality:e||`unknown`,size:n||null,subtitleLink:o[1]||null}))}}return t}function Ne(e){let t=[];if(!e)return t;let n=[...new DOMParser().parseFromString(e,`text/html`).querySelectorAll(`h3`)].filter(e=>/دانلود فصل\s*\d+/i.test(e.textContent||``));for(let e=0;e<n.length;e++){let r=n[e],i=(r.textContent||``).match(/(\d+)/),a=i?Number(i[1]):e+1,o=[];for(let e=r.nextElementSibling;e&&!n.includes(e);e=e.nextElementSibling)o.push(e);let s=o.map(e=>e.outerHTML).join(`
`),c=/<button[^>]*>([\s\S]*?)<\/button>[\s\S]*?<a[^>]*href="([^"]+)"[^>]*title="لینک های دانلود"[\s\S]*?<a[^>]*href="([^"]+)"[^>]*title="زیرنویس ها"/g,l=[],u;for(;u=c.exec(s);){let[e,t]=(u[1]||``).trim().replaceAll(/<[^>]+>/g,``).split(/\s\/\s/).map(e=>e.trim());l.push(Q({downloadLink:u[2]||null,quality:e||`unknown`,size:t||null,subtitleLink:u[3]||null}))}t.push({qualities:l,season:a})}return t}function Pe(e){if(!e)return null;try{let t=[...new DOMParser().parseFromString(e,`text/html`).querySelectorAll(`link[rel]`)].find(e=>{let t=(e.getAttribute(`rel`)||``).toLowerCase(),n=(e.getAttribute(`type`)||``).toLowerCase(),r=(e.getAttribute(`title`)||``).toLowerCase();return t===`alternate`&&n===`application/json`&&r===`json`});if(!t)return null;let n=t.getAttribute(`href`)||``,r=n.match(/\/(\d+)(?=([\/\?#]|$))/);if(!r)return null;let i=r[1],a=n.includes(`/series/`)?`tvshow`:`movie`;return{id:i,type:a}}catch{return null}}var Fe=u(e());const $=e=>{let t=(0,Fe.c)(3),n;t[0]===Symbol.for(`react.memo_cache_sentinel`)?(n=(0,v.jsx)(`path`,{clipRule:`evenodd`,d:`M5 1a4 4 0 0 0-4 4v14a4 4 0 0 0 4 4h14a4 4 0 0 0 4-4V5a4 4 0 0 0-4-4zM4 14.91V9.09h1.455v5.82zm2.182 0V9.09H8L8.727 12l.728-2.91h1.818v5.82H9.818v-2.546l-.727 2.545h-.727l-.728-2.545v2.545zm5.818 0h2.182c.803 0 1.454-.652 1.454-1.455v-2.91c0-.803-.65-1.454-1.454-1.454H12v5.818Zm1.454-4.728h.364c.201 0 .364.163.364.364v2.909c0 .2-.163.363-.364.363h-.364zm2.91-1.091h1.454v1.783c.243-.177.603-.329 1.091-.329c.873 0 1.091.485 1.091.728v2.909c0 .242-.218.727-1.09.727c-.49 0-.849-.152-1.092-.328v.328h-1.454zm2.181 4.364V12a.364.364 0 0 0-.727 0v1.455a.364.364 0 0 0 .727 0`,fill:`currentColor`,fillRule:`evenodd`}),t[0]=n):n=t[0];let r;return t[1]===e?r=t[2]:(r=(0,v.jsx)(`svg`,{height:24,viewBox:`0 0 24 24`,width:24,xmlns:`http://www.w3.org/2000/svg`,...e,children:n}),t[1]=e,t[2]=r),r};export{Se as a,g as c,xe as i,Oe as n,Ce as o,Ee as r,we as s,$ as t};